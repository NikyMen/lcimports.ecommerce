import{c as m,j as e}from"./createLucideIcon.V6CX3xPE.js";import{r as d}from"./index.Ba-IbuDT.js";import{u as y,S as u}from"./cartStore.VKx_K2hc.js";import{P as w,X as f}from"./x.CR9khbzC.js";import{P as z,T as I,U as S,S as N}from"./user.N9vK21ye.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=m("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=m("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=m("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=m("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),P=({onClick:s})=>{const t=y(a=>a.getTotalItems)();return e.jsxs("button",{onClick:s,className:"relative p-2 text-gray-600 hover:text-primary-600 transition-colors",title:"Ver carrito",children:[e.jsx(u,{size:24}),t>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:t>99?"99+":t})]})},E=({item:s})=>{const{updateQuantity:r,removeItem:t}=y(),a=()=>{r(s.product.id,s.quantity+1)},i=()=>{s.quantity>1?r(s.product.id,s.quantity-1):t(s.product.id)},o=()=>{t(s.product.id)},h=s.product.price*s.quantity;return e.jsxs("div",{className:"flex items-center space-x-4 py-4 border-b border-gray-200 last:border-b-0",children:[e.jsx("div",{className:"flex-shrink-0",children:s.product.image?e.jsx("img",{src:s.product.image,alt:s.product.name,className:"h-16 w-16 rounded-lg object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded-lg bg-gray-200 flex items-center justify-center",children:e.jsx(w,{className:"h-8 w-8 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:s.product.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.product.category}),e.jsxs("p",{className:"text-sm font-medium text-primary-600",children:["$",s.product.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:i,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",title:"Disminuir cantidad",children:e.jsx(T,{size:16,className:"text-gray-600"})}),e.jsx("span",{className:"w-8 text-center text-sm font-medium",children:s.quantity}),e.jsx("button",{onClick:a,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",title:"Aumentar cantidad",children:e.jsx(z,{size:16,className:"text-gray-600"})})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",h.toFixed(2)]})}),e.jsx("button",{onClick:o,className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Eliminar del carrito",children:e.jsx(I,{size:16})})]})},F=({isOpen:s,onClose:r})=>{const{items:t,total:a,clearCart:i,getTotalItems:o}=y(),[h,x]=d.useState(!1),[c,p]=d.useState({name:"",phone:""}),[j,g]=d.useState(!1),C=async()=>{if(t.length!==0){g(!0);try{const n={products:t,total:a,customerInfo:c.name||c.phone?c:void 0},l=await fetch("/api/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),b=await l.json();l.ok?(window.open(b.whatsappUrl,"_blank"),x(!1),p({name:"",phone:""})):alert(`Error: ${b.error}`)}catch(n){console.error("Error al enviar consulta:",n),alert("Error al procesar la consulta. Inténtalo de nuevo.")}finally{g(!1)}}},k=()=>{confirm("¿Estás seguro de que quieres vaciar el carrito?")&&i()};return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:r}),e.jsx("div",{className:`fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl transform transition-transform duration-300 ease-in-out z-50 ${s?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-6 w-6 text-primary-600"}),e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Carrito (",o(),")"]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(f,{size:20,className:"text-gray-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t.length>0?e.jsx("div",{className:"space-y-4",children:t.map(n=>e.jsx(E,{item:n},n.product.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(u,{className:"h-16 w-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Agrega algunos productos para comenzar"}),e.jsx("button",{onClick:r,className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors",children:"Continuar comprando"})]})}),t.length>0&&e.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),e.jsxs("span",{className:"text-xl font-bold text-primary-600",children:["$",a.toFixed(2)]})]}),e.jsxs("button",{onClick:()=>x(!0),className:"w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(v,{size:20}),e.jsx("span",{children:"Consultar Stock por WhatsApp"})]}),e.jsx("button",{onClick:k,className:"w-full text-gray-600 py-2 px-4 rounded-md hover:bg-gray-100 transition-colors",children:"Vaciar carrito"})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-60",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Consulta de Stock"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(f,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Opcional: Agrega tu información para una mejor atención"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:c.name,onChange:n=>p(l=>({...l,name:n.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Tu nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"tel",value:c.phone,onChange:n=>p(l=>({...l,phone:n.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Tu número de teléfono"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:C,disabled:j,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center justify-center space-x-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Enviando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{size:16}),e.jsx("span",{children:"Enviar por WhatsApp"})]})})]})]})]})})})]})},L=()=>{const[s,r]=d.useState(!1),[t,a]=d.useState(!1),i=()=>{r(!s)},o=()=>{a(!t)};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("a",{href:"/",className:"flex items-center space-x-2",children:[e.jsx(w,{className:"h-8 w-8 text-primary-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"LC Imports"})]})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"/",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"Inicio"}),e.jsx("a",{href:"/#productos",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"Productos"}),e.jsxs("a",{href:"/admin",className:"text-gray-700 hover:text-primary-600 transition-colors flex items-center space-x-1",children:[e.jsx(N,{size:16}),e.jsx("span",{children:"Admin"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{onClick:i}),e.jsx("button",{onClick:o,className:"md:hidden p-2 text-gray-600 hover:text-primary-600 transition-colors",children:t?e.jsx(f,{size:24}):e.jsx(M,{size:24})})]})]}),t&&e.jsx("div",{className:"md:hidden border-t border-gray-200 py-4",children:e.jsxs("nav",{className:"flex flex-col space-y-4",children:[e.jsx("a",{href:"/",className:"text-gray-700 hover:text-primary-600 transition-colors",onClick:()=>a(!1),children:"Inicio"}),e.jsx("a",{href:"/#productos",className:"text-gray-700 hover:text-primary-600 transition-colors",onClick:()=>a(!1),children:"Productos"}),e.jsxs("a",{href:"/admin",className:"text-gray-700 hover:text-primary-600 transition-colors flex items-center space-x-2",onClick:()=>a(!1),children:[e.jsx(N,{size:16}),e.jsx("span",{children:"Panel de Administración"})]})]})})]})}),e.jsx(F,{isOpen:s,onClose:()=>r(!1)})]})};export{L as Header};
