import{c as f,j as e}from"./createLucideIcon.V6CX3xPE.js";import{r as a}from"./index.Ba-IbuDT.js";import{u as z,S as E}from"./cartStore.VKx_K2hc.js";import{X as v,P as S}from"./x.CR9khbzC.js";import{S as N}from"./star.Cy-Gx_tK.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=f("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=f("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=f("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=f("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=f("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=f("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Q=()=>{const[t,o]=a.useState({message:"",type:"info",isVisible:!1}),n=a.useCallback((l,s="info")=>{o({message:l,type:s,isVisible:!0})},[]),c=a.useCallback(()=>{o(l=>({...l,isVisible:!1}))},[]),x=a.useCallback(l=>{n(l,"success")},[n]),d=a.useCallback(l=>{n(l,"error")},[n]);return{notification:t,showNotification:n,hideNotification:c,showSuccess:x,showError:d}},V=({message:t,type:o,isVisible:n,onClose:c,duration:x=3e3})=>{const[d,l]=a.useState(!1);if(a.useEffect(()=>{if(n){l(!0);const h=setTimeout(()=>{l(!1),setTimeout(c,300)},x);return()=>clearTimeout(h)}},[n,x,c]),!n)return null;const s=()=>{switch(o){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},p=()=>{switch(o){case"success":return e.jsx(C,{className:"h-5 w-5 text-green-600"});case"error":return e.jsx(v,{className:"h-5 w-5 text-red-600"});case"info":return e.jsx(C,{className:"h-5 w-5 text-blue-600"});default:return e.jsx(C,{className:"h-5 w-5 text-gray-600"})}};return e.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full bg-white border rounded-lg shadow-lg transition-all duration-300 ${d?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:e.jsx("div",{className:`p-4 border-l-4 ${s()}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:p()}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm font-medium",children:t})}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx("button",{onClick:c,className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors",children:e.jsx(v,{className:"h-4 w-4"})})})]})})})},R=({product:t})=>{const o=z(m=>m.addItem),{notification:n,showSuccess:c,hideNotification:x}=Q(),[d,l]=a.useState(0),s=()=>{o(t,1),c(`${t.name} se añadió correctamente al carrito`)},h=(m=>m===0?{text:"Sin stock",color:"text-red-600 bg-red-100"}:m<10?{text:"Poco stock",color:"text-yellow-600 bg-yellow-100"}:{text:"En stock",color:"text-green-600 bg-green-100"})(t.stock),g=[t.image,...t.images||[]].filter(Boolean),i=g[d]||t.image,y=()=>{l(m=>(m+1)%g.length)},k=()=>{l(m=>(m-1+g.length)%g.length)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[i?e.jsx("img",{src:i,alt:t.name,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center",children:e.jsx(S,{className:"h-16 w-16 text-gray-400"})}),g.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:k,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-70 transition-opacity",children:e.jsx(q,{size:16})}),e.jsx("button",{onClick:y,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-70 transition-opacity",children:e.jsx(P,{size:16})}),e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:g.map((m,b)=>e.jsx("button",{onClick:()=>l(b),className:`w-2 h-2 rounded-full transition-colors ${b===d?"bg-white":"bg-white bg-opacity-50"}`},b))})]}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h.color}`,children:h.text})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:t.category})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:t.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx(N,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx(N,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx(N,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx(N,{className:"h-4 w-4 text-gray-300"}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"(4.0)"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Stock: ",t.stock]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("span",{className:"text-2xl font-bold text-primary-600",children:["$",t.price.toFixed(2)]})}),e.jsxs("button",{onClick:s,disabled:t.stock===0,className:`flex items-center space-x-2 px-4 py-2 rounded-md font-medium transition-colors ${t.stock===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"}`,children:[e.jsx(E,{size:16}),e.jsx("span",{children:t.stock===0?"Sin stock":"Agregar"})]})]})]})]}),e.jsx(V,{message:n.message,type:n.type,isVisible:n.isVisible,onClose:x})]})},D=({searchQuery:t,onSearchChange:o,selectedCategory:n,onCategoryChange:c,categories:x,showFilters:d,onToggleFilters:l})=>e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(M,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",value:t,onChange:s=>o(s.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("button",{onClick:l,className:`flex items-center space-x-2 px-4 py-2 border rounded-md transition-colors ${d?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(A,{size:16}),e.jsx("span",{children:"Filtros"})]})]}),d&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>c(null),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${n===null?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Todas las categorías"}),x.map(s=>e.jsx("button",{onClick:()=>c(s),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${n===s?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},s))]})})]}),J=({onCartUpdate:t})=>{const[o,n]=a.useState([]),[c,x]=a.useState([]),[d,l]=a.useState(!0),[s,p]=a.useState(""),[h,g]=a.useState(""),[i,y]=a.useState(null),[k,m]=a.useState(!1);a.useEffect(()=>{b(),I()},[]),a.useEffect(()=>{const r=setTimeout(()=>{g(s)},300);return()=>clearTimeout(r)},[s]);const b=async()=>{try{l(!0);const u=await(await fetch("/api/products")).json();n(u)}catch(r){console.error("Error al cargar productos:",r)}finally{l(!1)}},I=async()=>{try{const u=await(await fetch("/api/categories")).json();x(u.map(j=>j.name))}catch(r){console.error("Error al cargar categorías:",r)}},w=a.useMemo(()=>{let r=o;if(h.trim()){const u=h.toLowerCase();r=r.filter(j=>j.name.toLowerCase().includes(u)||j.description.toLowerCase().includes(u)||j.category.toLowerCase().includes(u))}return i&&(r=r.filter(u=>u.category===i)),r},[o,h,i]),L=a.useCallback(r=>{p(r)},[]),$=a.useCallback(r=>{y(r)},[]),F=a.useCallback(()=>{m(r=>!r)},[]),T=a.useCallback(()=>{p(""),y(null)},[]);return d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"h-8 w-8 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando productos..."})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(D,{searchQuery:s,onSearchChange:L,selectedCategory:i,onCategoryChange:$,categories:c,showFilters:k,onToggleFilters:F}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600",children:w.length===0?"No se encontraron productos":`Mostrando ${w.length} de ${o.length} productos`}),(s||i)&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[s&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:['Búsqueda: "',s,'"',e.jsx("button",{onClick:()=>p(""),className:"ml-1 text-primary-600 hover:text-primary-800",children:e.jsx(v,{size:12})})]}),i&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:["Categoría: ",i,e.jsx("button",{onClick:()=>y(null),className:"ml-1 text-primary-600 hover:text-primary-800",children:e.jsx(v,{size:12})})]})]})]}),w.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:w.map(r=>e.jsx(R,{product:r},r.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:s||i?"No se encontraron productos":"No hay productos disponibles"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s||i?"Intenta con otros términos de búsqueda o filtros diferentes.":"Los productos aparecerán aquí cuando estén disponibles."}),(s||i)&&e.jsx("button",{onClick:T,className:"mt-4 text-primary-600 hover:text-primary-500 text-sm font-medium",children:"Limpiar filtros"})]})]})};export{J as ProductGrid};
