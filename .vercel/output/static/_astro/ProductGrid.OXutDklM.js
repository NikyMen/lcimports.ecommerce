import{c as j,j as e}from"./createLucideIcon.V6CX3xPE.js";import{r as a}from"./index.Ba-IbuDT.js";import{u as E,S as q}from"./cartStore.VKx_K2hc.js";import{P as N,X as b}from"./x.CR9khbzC.js";import{S as u}from"./star.Cy-Gx_tK.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=j("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=j("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Q=({product:t})=>{const c=E(o=>o.addItem),i=()=>{c(t,1)},d=(o=>o===0?{text:"Sin stock",color:"text-red-600 bg-red-100"}:o<10?{text:"Poco stock",color:"text-yellow-600 bg-yellow-100"}:{text:"En stock",color:"text-green-600 bg-green-100"})(t.stock);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center",children:e.jsx(N,{className:"h-16 w-16 text-gray-400"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d.color}`,children:d.text})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:t.category})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:t.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(u,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx(u,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx(u,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx(u,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx(u,{className:"h-4 w-4 text-gray-300"}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"(4.0)"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Stock: ",t.stock]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("span",{className:"text-2xl font-bold text-primary-600",children:["$",t.price.toFixed(2)]})}),e.jsxs("button",{onClick:i,disabled:t.stock===0,className:`flex items-center space-x-2 px-4 py-2 rounded-md font-medium transition-colors ${t.stock===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"}`,children:[e.jsx(q,{size:16}),e.jsx("span",{children:t.stock===0?"Sin stock":"Agregar"})]})]})]})]})},B=({searchQuery:t,onSearchChange:c,selectedCategory:i,onCategoryChange:m,categories:d,showFilters:o,onToggleFilters:h})=>e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",value:t,onChange:r=>c(r.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("button",{onClick:h,className:`flex items-center space-x-2 px-4 py-2 border rounded-md transition-colors ${o?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(T,{size:16}),e.jsx("span",{children:"Filtros"})]})]}),o&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>m(null),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${i===null?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Todas las categorías"}),d.map(r=>e.jsx("button",{onClick:()=>m(r),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${i===r?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r},r))]})})]}),U=({onCartUpdate:t})=>{const[c,i]=a.useState([]),[m,d]=a.useState([]),[o,h]=a.useState(!0),[r,p]=a.useState(""),[y,w]=a.useState(""),[l,f]=a.useState(null),[v,C]=a.useState(!1);a.useEffect(()=>{S(),k()},[]),a.useEffect(()=>{const s=setTimeout(()=>{w(r)},300);return()=>clearTimeout(s)},[r]);const S=async()=>{try{h(!0);const n=await(await fetch("/api/products")).json();i(n)}catch(s){console.error("Error al cargar productos:",s)}finally{h(!1)}},k=async()=>{try{const n=await(await fetch("/api/categories")).json();d(n.map(x=>x.name))}catch(s){console.error("Error al cargar categorías:",s)}},g=a.useMemo(()=>{let s=c;if(y.trim()){const n=y.toLowerCase();s=s.filter(x=>x.name.toLowerCase().includes(n)||x.description.toLowerCase().includes(n)||x.category.toLowerCase().includes(n))}return l&&(s=s.filter(n=>n.category===l)),s},[c,y,l]),L=a.useCallback(s=>{p(s)},[]),F=a.useCallback(s=>{f(s)},[]),P=a.useCallback(()=>{C(s=>!s)},[]),$=a.useCallback(()=>{p(""),f(null)},[]);return o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(z,{className:"h-8 w-8 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando productos..."})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(B,{searchQuery:r,onSearchChange:L,selectedCategory:l,onCategoryChange:F,categories:m,showFilters:v,onToggleFilters:P}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600",children:g.length===0?"No se encontraron productos":`Mostrando ${g.length} de ${c.length} productos`}),(r||l)&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[r&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:['Búsqueda: "',r,'"',e.jsx("button",{onClick:()=>p(""),className:"ml-1 text-primary-600 hover:text-primary-800",children:e.jsx(b,{size:12})})]}),l&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:["Categoría: ",l,e.jsx("button",{onClick:()=>f(null),className:"ml-1 text-primary-600 hover:text-primary-800",children:e.jsx(b,{size:12})})]})]})]}),g.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(s=>e.jsx(Q,{product:s},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:r||l?"No se encontraron productos":"No hay productos disponibles"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r||l?"Intenta con otros términos de búsqueda o filtros diferentes.":"Los productos aparecerán aquí cuando estén disponibles."}),(r||l)&&e.jsx("button",{onClick:$,className:"mt-4 text-primary-600 hover:text-primary-500 text-sm font-medium",children:"Limpiar filtros"})]})]})};export{U as ProductGrid};
